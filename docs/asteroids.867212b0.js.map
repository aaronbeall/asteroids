{"version":3,"sources":["../node_modules/stats.js/build/stats.min.js","math-utils.ts","dom-utils.ts","GameObject.ts","Particle.ts","Rock.ts","Bullet.ts","KeyboardController.ts","Player.ts","HUD.ts","Game.ts","asteroids.ts"],"names":[],"mappings":"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","file":"asteroids.867212b0.js","sourceRoot":"../src","sourcesContent":["// stats.js - http://github.com/mrdoob/stats.js\n(function(f,e){\"object\"===typeof exports&&\"undefined\"!==typeof module?module.exports=e():\"function\"===typeof define&&define.amd?define(e):f.Stats=e()})(this,function(){var f=function(){function e(a){c.appendChild(a.dom);return a}function u(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?\"block\":\"none\";l=a}var l=0,c=document.createElement(\"div\");c.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";c.addEventListener(\"click\",function(a){a.preventDefault();\nu(++l%c.children.length)},!1);var k=(performance||Date).now(),g=k,a=0,r=e(new f.Panel(\"FPS\",\"#0ff\",\"#002\")),h=e(new f.Panel(\"MS\",\"#0f0\",\"#020\"));if(self.performance&&self.performance.memory)var t=e(new f.Panel(\"MB\",\"#f08\",\"#201\"));u(0);return{REVISION:16,dom:c,addPanel:e,showPanel:u,begin:function(){k=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();h.update(c-k,200);if(c>g+1E3&&(r.update(1E3*a/(c-g),100),g=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/\n1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){k=this.end()},domElement:c,setMode:u}};f.Panel=function(e,f,l){var c=Infinity,k=0,g=Math.round,a=g(window.devicePixelRatio||1),r=80*a,h=48*a,t=3*a,v=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement(\"canvas\");q.width=r;q.height=h;q.style.cssText=\"width:80px;height:48px\";var b=q.getContext(\"2d\");b.font=\"bold \"+9*a+\"px Helvetica,Arial,sans-serif\";b.textBaseline=\"top\";b.fillStyle=l;b.fillRect(0,0,r,h);b.fillStyle=f;b.fillText(e,t,v);\nb.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(h,w){c=Math.min(c,h);k=Math.max(k,h);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=f;b.fillText(g(h)+\" \"+e+\" (\"+g(c)+\"-\"+g(k)+\")\",t,v);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,g((1-h/w)*p))}}};return f});\n","\nexport const degreesToRadians = (degrees: number) => degrees * (Math.PI / 180);\nexport const radiansToDegrees = (radians: number) => radians * (180 / Math.PI);\n\nexport function vector(args: { length: number; degrees: number }): { x: number; y: number; }\nexport function vector(args: { length: number; radians: number }): { x: number; y: number; }\nexport function vector({ length, ...radiansOrDegrees }: ({\n  radians: number;\n} | {\n  degrees: number;\n}) & {\n  length: number;\n}): {\n  x: number;\n  y: number;\n} {\n  const radians = \"radians\" in radiansOrDegrees\n    ? radiansOrDegrees.radians\n    : degreesToRadians(radiansOrDegrees.degrees);\n  return {\n    x: Math.cos(radians) * length,\n    y: Math.sin(radians) * length\n  };\n}\n\nexport function vectorLength({ x, y }: { x: number; y: number; }): number {\n  return Math.sqrt((x * x) + (y * y));\n}\n\nexport function distanceBetween(from: { x: number; y: number; }, to: { x: number; y: number; }): number {\n  const deltaX = from.x - to.x;\n  const deltaY = from.y - to.y;\n  return Math.sqrt((deltaX * deltaX) + (deltaY * deltaY));\n}","export function createContainerElement() {\n  const elem = document.createElement(\"div\");\n  elem.style.cssText = `position: absolute; top: 0; left: 0; right: 0; bottom: 0;`;\n  return elem;\n}\n\nexport function createRadialCanvasElement(radius: number) {\n  const elem = document.createElement(\"canvas\");\n  elem.style.cssText = `position: absolute; top: -${radius}px; left: -${radius}px`;\n  elem.width = radius * 2;\n  elem.height = radius * 2;\n  return elem;\n}\n","import { Game } from \"./Game\";\nimport { createRadialCanvasElement } from \"./dom-utils\";\nimport { createContainerElement } from \"./dom-utils\";\n\nexport abstract class GameObject {\n  x: number = 0;\n  y: number = 0;\n  radius: number = 0;\n  rotation: number = 0;\n  friction: number = 0;\n  vector: {\n    x: number;\n    y: number;\n  } = { x: 0, y: 0 };\n  graphics = createContainerElement();\n\n  constructor(public game: Game) { }\n\n  abstract draw(): void;\n\n  createCanvas() {\n    const canvas = createRadialCanvasElement(this.radius);\n    this.graphics.appendChild(canvas);\n    const ctx = canvas.getContext(\"2d\");\n    if (!ctx)\n      throw new Error(`Context not ready`);\n    return { canvas, ctx };\n  }\n\n  update(frameTime: number): void {\n    if (this.friction) {\n      this.vector.x *= this.friction;\n      this.vector.y *= this.friction;\n    }\n    if (this.vector.x !== 0 || this.vector.x !== 0) {\n      this.x += this.vector.x * frameTime;\n      this.y += this.vector.y * frameTime;\n      this.loop();\n    }\n  }\n\n  render() {\n    this.graphics.style.left = `${this.x}px`;\n    this.graphics.style.top = `${this.y}px`;\n    this.graphics.style.transform = `rotate(${this.rotation}deg)`;\n    this.graphics.style.transformOrigin = `top left`;\n  }\n\n  loop() {\n    const viewport = this.game.viewport;\n    if (this.x > viewport.width + this.radius)\n      this.x -= viewport.width + this.radius * 2;\n    else if (this.x < -this.radius)\n      this.x += viewport.width + this.radius * 2;\n    if (this.y > viewport.height + this.radius)\n      this.y -= viewport.height + this.radius * 2;\n    else if (this.y < -this.radius)\n      this.y += viewport.height + this.radius * 2;\n  }\n}\n","import { Game } from \"./Game\";\nimport { GameObject } from \"./GameObject\";\nimport { vector, vectorLength } from \"./math-utils\";\n\nexport interface ParticleOptions {\n  color?: string;\n  minSpeed?: number;\n  maxSpeed?: number;\n  maxScale?: number;\n  friction?: number;\n  radius?: number;\n}\n\nexport class Particle extends GameObject {\n  canvas!: HTMLCanvasElement;\n  color = \"gray\";\n  minSpeed = 10;\n  maxSpeed = 50;\n  maxScale = 15;\n  friction = 0.88;\n  radius = 2;\n\n  constructor(game: Game, degrees: number, opts: ParticleOptions = {}) {\n    super(game);\n    this.rotation = degrees;\n\n    // apply options with defaults\n    Object.assign(this, opts);\n\n    const speed = this.minSpeed + (this.maxSpeed - this.minSpeed) * Math.random();\n    this.vector = vector({ length: speed, degrees });\n  }\n\n  draw() {\n    const { canvas, ctx } = this.createCanvas();\n    this.canvas = canvas;\n    ctx.beginPath();\n    ctx.moveTo(this.radius * 2, 0);\n    ctx.lineTo(this.radius * 2, this.radius * 2);\n    ctx.lineTo(0, this.radius);\n    ctx.closePath();\n    ctx.fillStyle = this.color;\n    ctx.fill();\n  }\n\n  update(frameTime: number) {\n    super.update(frameTime);\n    const speed = vectorLength(this.vector);\n    if (speed < 1) {\n      this.game.removeObject(this);\n    }\n  }\n  \n  render() {\n    super.render();\n    const speed = vectorLength(this.vector);\n    const scale = this.maxScale * (speed / this.maxSpeed);\n    this.canvas.style.transform = `scaleX(${scale})`;\n  }\n}\n","import { Game } from \"./Game\";\nimport { GameObject } from \"./GameObject\";\nimport { vector } from \"./math-utils\";\n\nexport class Rock extends GameObject {\n  spin: number;\n  health: number;\n  static maxIteration = 3;\n  static rocksSpawnedOnDeath = 3;\n\n  constructor(game: Game, public iteration: number = 1) {\n    super(game);\n    this.iteration = iteration;\n    this.health = 12 - iteration * 2;\n    this.spin = Math.random() * iteration;\n    this.radius = 75 / iteration;\n    this.vector = vector({ length: iteration, degrees: Math.random() * 360 });\n  }\n\n  draw() {\n    const { ctx } = this.createCanvas();\n    ctx.beginPath();\n    ctx.translate(this.radius, this.radius);\n    const edges = 12, noise = .44;\n    for (let i = 0; i < edges; i++) {\n      const degrees = ((360 / edges) * i) + ((360 / edges) * noise * Math.random());\n      const length = this.radius - (this.radius * noise * Math.random());\n      const { x, y } = vector({ length, degrees });\n      ctx.lineTo(x, y);\n    }\n    ctx.closePath();\n    ctx.stroke();\n  }\n\n  update(frameTime: number) {\n    super.update(frameTime);\n    this.rotation += this.spin * frameTime;\n  }\n  \n  hit() {\n    if (--this.health <= 0) {\n      this.game.removeObject(this);\n      this.game.addParticles(25, { x: this.x, y: this.y });\n      if (this.iteration < Rock.maxIteration) {\n        const iteration = this.iteration + 1;\n        this.game.addRocks(Rock.rocksSpawnedOnDeath, { x: this.x, y: this.y, iteration });\n      }\n    }\n  }\n\n  kill() {\n    this.health = 1;\n    this.hit();\n  }\n}\n","import { Game } from \"./Game\";\nimport { GameObject } from \"./GameObject\";\nimport { Rock } from \"./Rock\";\nimport { vector } from \"./math-utils\";\n\nexport class Bullet extends GameObject {\n  speed = 10;\n  life = 120;\n  impactDepth = 3;\n\n  constructor(game: Game, degrees: number, initVector: {\n    x: number;\n    y: number;\n  }) {\n    super(game);\n    this.radius = 3;\n    this.rotation = degrees;\n    this.vector = vector({ length: this.speed, degrees });\n    this.vector.x += initVector.x;\n    this.vector.y += initVector.y;\n  }\n\n  draw() {\n    const { canvas, ctx } = this.createCanvas();\n    ctx.beginPath();\n    ctx.moveTo(this.radius * 2, this.radius);\n    ctx.lineTo(this.radius * 1.5, this.radius * 2);\n    ctx.lineTo(0, this.radius);\n    ctx.lineTo(this.radius * 1.5, 0);\n    ctx.closePath();\n    ctx.fill();\n    canvas.style.transform = `scaleX(3)`;\n  }\n  \n  update(frameTime: number) {\n    super.update(frameTime);\n    this.life -= frameTime;\n    if (this.life <= 0) {\n      this.game.removeObject(this);\n    }\n    else {\n      const collidedRocks = this.game.getObjectsIntersectingCircle({\n        x: this.x,\n        y: this.y,\n        radius: -this.impactDepth\n      }, Rock);\n      if (collidedRocks.length) {\n        this.game.addParticles(5, { x: this.x, y: this.y });\n        this.game.removeObject(this);\n        collidedRocks.forEach(rock => rock.hit());\n      }\n    }\n  }\n}\n","export class KeyboardController {\n  keys: {\n    [code: string]: boolean;\n  } = {};\n\n  constructor() {\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n    window.addEventListener(\"keyup\", this.handleKeyUp);\n  }\n\n  handleKeyDown = (e: KeyboardEvent) => {\n    // console.log(\"keyDown\", e.code);\n    this.keys[e.code] = true;\n  };\n\n  handleKeyUp = (e: KeyboardEvent) => {\n    this.keys[e.code] = false;\n  };\n  \n  isDown(key: string): boolean {\n    return !!this.keys[key];\n  }\n}\n","import { Game } from \"./Game\";\nimport { GameObject } from \"./GameObject\";\nimport { vector } from \"./math-utils\";\nimport { KeyboardController } from \"./KeyboardController\";\nimport { Particle } from \"./Particle\";\nimport { Rock } from \"./Rock\";\n\nexport class Player extends GameObject {\n  rotationSpeed = 3;\n  thrustSpeed = .15;\n  refireDelay = 10;\n  keyboard = new KeyboardController();\n  refire = 0;\n  health = 4;\n  maxHealth = 4;\n  dead = false;\n  invulnerable = false;\n  invulnerableUntil = 0;\n  flashInterval = 80; // ms\n  color = 'black';\n  private lastFlashPhase: number | null = null;\n\n  constructor(game: Game) {\n    super(game);\n    this.radius = 12;\n    this.friction = .99;\n  }\n\n  draw() {\n    // if dead, don't draw the ship anymore\n    if (this.dead) {\n      // clear any existing canvas so the ship disappears\n      const existing = this.graphics.querySelector('canvas') as HTMLCanvasElement | null;\n      if (existing) {\n        const ctx = existing.getContext('2d')!;\n        ctx.clearRect(0, 0, existing.width, existing.height);\n      }\n      return;\n    }\n\n    // reuse existing canvas if present to avoid appending multiple canvases\n    let canvas = this.graphics.querySelector('canvas') as HTMLCanvasElement | null;\n    let ctx: CanvasRenderingContext2D;\n    if (canvas) {\n      ctx = canvas.getContext('2d')!;\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n    } else {\n      const res = this.createCanvas();\n      canvas = res.canvas;\n      ctx = res.ctx;\n    }\n\n    ctx.beginPath();\n    ctx.moveTo(this.radius * 2, this.radius);\n    ctx.lineTo(0, this.radius * 2);\n    ctx.lineTo(this.radius / 2, this.radius);\n    ctx.lineTo(0, 0);\n    ctx.closePath();\n    ctx.fillStyle = this.color;\n    ctx.fill();\n  }\n  \n  update(frameTime: number) {\n    // if dead, ignore input and movement\n    if (this.dead) return;\n\n    super.update(frameTime);\n    if (this.keyboard.isDown(\"ArrowLeft\")) {\n      this.rotation -= this.rotationSpeed * frameTime;\n    }\n    if (this.keyboard.isDown(\"ArrowRight\")) {\n      this.rotation += this.rotationSpeed * frameTime;\n    }\n    if (this.keyboard.isDown(\"ArrowUp\")) {\n      const { x, y } = vector({ length: this.thrustSpeed * frameTime, degrees: this.rotation });\n      this.vector.x += x * frameTime;\n      this.vector.y += y * frameTime;\n      const offset = vector({ length: this.radius + this.radius * Math.random(), degrees: this.rotation - 180 });\n      this.game.addParticles(1, { x: this.x + offset.x, y: this.y + offset.y, angleDegrees: this.rotation - 180, spreadDegrees: 35 });\n    }\n    this.refire -= 1 * frameTime;\n    if (this.keyboard.isDown(\"Space\") && this.refire <= 0) {\n      this.refire = this.refireDelay;\n      const offset = vector({ length: this.radius, degrees: this.rotation });\n      this.game.addBullet({ x: this.x + offset.x, y: this.y + offset.y, degrees: this.rotation, vector: this.vector });\n    }\n\n    // handle invulnerability timing and flashing\n    const now = performance.now();\n    if (this.invulnerable) {\n      if (now >= this.invulnerableUntil) {\n        this.invulnerable = false;\n        this.color = 'black';\n        this.lastFlashPhase = null;\n        this.draw();\n      } else {\n        // flash effect: toggle color between red and black\n        const phase = Math.floor(now / this.flashInterval) % 2;\n        if (this.lastFlashPhase !== phase) {\n          this.lastFlashPhase = phase;\n          this.color = phase ? 'red' : 'black';\n          this.draw();\n        }\n      }\n    }\n\n    // collision detection with rocks\n    if (!this.invulnerable) {\n      const hits = this.game.getObjectsIntersectingCircle({ x: this.x, y: this.y, radius: this.radius }, Rock);\n      if (hits.length > 0) {\n          // break the rock we collided with\n          hits.forEach(rock => rock.kill());\n\n          // take one hit\n          this.health -= 1;\n\n          // spawn red sparks via game helper\n          this.game.addParticles(16, { x: this.x, y: this.y, angleDegrees: 0, spreadDegrees: 360 }, { color: 'red', minSpeed: 2, maxSpeed: 12, maxScale: 12, friction: .92 });\n\n          // if health dropped to zero or below, spawn a massive red burst and mark dead\n          if (this.health <= 0) {\n            // big dramatic burst\n            this.game.addParticles(64, { x: this.x, y: this.y, angleDegrees: 0, spreadDegrees: 360 }, { color: 'red', minSpeed: 2, maxSpeed: 24, maxScale: 24, friction: .92 });\n            this.game.addParticles(64, { x: this.x, y: this.y, angleDegrees: 0, spreadDegrees: 360 }, { color: 'red', minSpeed: 1, maxSpeed: 24, maxScale: 24, friction: .98 });\n            this.dead = true;\n            // hide the ship's graphics immediately\n            this.graphics.style.display = 'none';\n          }\n\n          // set invulnerability\n          this.invulnerable = true;\n          this.invulnerableUntil = now + 1000;\n      }\n    }\n  }\n}\n","import { Game } from './Game';\n\nexport interface HUDState {\n  playerHealth: number;\n  playerMaxHealth: number;\n}\n\nexport class HUD {\n  el!: HTMLDivElement;\n  canvas!: HTMLCanvasElement;\n  ctx!: CanvasRenderingContext2D;\n\n  constructor(public game: Game) {\n    this.el = document.createElement('div');\n    this.el.style.cssText = 'position: absolute; left: 0; top: 0; pointer-events: none; width: 100%; height: 100%;';\n\n    this.canvas = document.createElement('canvas');\n    this.canvas.width = this.game.viewport.width;\n    this.canvas.height = this.game.viewport.height;\n    this.canvas.style.cssText = 'width: 100%; height: 100%; display: block; position: absolute; left: 0; top: 0;';\n\n    const ctx = this.canvas.getContext('2d');\n    if (!ctx) throw new Error('2D context not available');\n    this.ctx = ctx;\n\n    this.el.appendChild(this.canvas);\n\n    // attach to game's container\n    this.game.container.style.position = this.game.container.style.position || 'relative';\n    this.game.container.appendChild(this.el);\n  }\n\n  resize() {\n    this.canvas.width = this.game.viewport.width;\n    this.canvas.height = this.game.viewport.height;\n  }\n\n  update(state: HUDState) {\n    // clear the overlay\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n    const padding = 12;\n    this.drawHealth(state, padding);\n\n    // if the player is dead, show a centered message\n      if (state.playerHealth <= 0) {\n        const centerX = this.canvas.width / 2;\n        const centerY = this.canvas.height / 2;\n        this.ctx.save();\n        this.ctx.textAlign = 'center';\n\n        // Prepare texts\n        const title = '💀 You died';\n        const subtitle = 'Press Enter to play again';\n        this.ctx.font = '28px sans-serif';\n        const titleW = this.ctx.measureText(title).width;\n        this.ctx.font = '16px sans-serif';\n        const subW = this.ctx.measureText(subtitle).width;\n        const panelW = Math.max(titleW, subW) + 40;\n        const panelH = 64;\n\n        // draw red rounded panel\n        const px = centerX - panelW / 2;\n        const py = centerY - panelH / 2;\n        const r = 8;\n        this.ctx.fillStyle = '#b71c1c';\n        this.ctx.beginPath();\n        this.ctx.moveTo(px + r, py);\n        this.ctx.lineTo(px + panelW - r, py);\n        this.ctx.quadraticCurveTo(px + panelW, py, px + panelW, py + r);\n        this.ctx.lineTo(px + panelW, py + panelH - r);\n        this.ctx.quadraticCurveTo(px + panelW, py + panelH, px + panelW - r, py + panelH);\n        this.ctx.lineTo(px + r, py + panelH);\n        this.ctx.quadraticCurveTo(px, py + panelH, px, py + panelH - r);\n        this.ctx.lineTo(px, py + r);\n        this.ctx.quadraticCurveTo(px, py, px + r, py);\n        this.ctx.closePath();\n        this.ctx.fill();\n\n        // draw text\n        this.ctx.fillStyle = 'white';\n        this.ctx.font = '28px sans-serif';\n        this.ctx.fillText(title, centerX, centerY - 6);\n        this.ctx.font = '16px sans-serif';\n        this.ctx.fillText(subtitle, centerX, centerY + 18);\n        this.ctx.restore();\n    }\n  }\n\n  drawHealth(state: HUDState, padding = 12) {\n    const barWidth = 120;\n    const barHeight = 18;\n    const segments = state.playerMaxHealth || 1;\n    const segWidth = (barWidth - (segments - 1) * 6) / segments;\n    const healthX = this.canvas.width - padding - barWidth;\n    const y = padding;\n\n    for (let i = 0; i < segments; i++) {\n      const sx = healthX + i * (segWidth + 6);\n      if (i < state.playerHealth) {\n        // choose color based on remaining health\n        const remaining = state.playerHealth;\n        let color = '#6ee36e'; // green\n        if (remaining === state.playerMaxHealth) color = '#6ee36e';\n        else if (remaining === state.playerMaxHealth - 1) color = '#ffd24d'; // yellow\n        else if (remaining === state.playerMaxHealth - 2) color = '#ff9a3c'; // orange\n        else color = '#ff5c5c'; // red\n        this.ctx.fillStyle = color;\n      } else {\n        this.ctx.fillStyle = '#333';\n      }\n      this.ctx.fillRect(sx, y, segWidth, barHeight);\n      // segment border\n      this.ctx.strokeStyle = '#000';\n      this.ctx.strokeRect(sx, y, segWidth, barHeight);\n    }\n\n    // health label\n    this.ctx.fillStyle = 'white';\n    this.ctx.textAlign = 'right';\n    this.ctx.fillText('Health', healthX + barWidth, y + barHeight + 12);\n    this.ctx.textAlign = 'left';\n  }\n}\n","import Stats from \"stats.js\";\nimport { distanceBetween } from \"./math-utils\";\nimport { Particle, ParticleOptions } from \"./Particle\";\nimport { Bullet } from \"./Bullet\";\nimport { Player } from \"./Player\";\nimport { Rock } from \"./Rock\";\nimport { GameObject } from \"./GameObject\";\nimport { HUD } from \"./HUD\";\n\nexport class Game {\n  static FRAME_TIME = 1000 / 60;\n  objects: GameObject[] = [];\n  animationFrameHandle?: number;\n  lastUpdateTime?: number;\n  stats = new Stats();\n  hud: HUD;\n\n  constructor(public container: HTMLElement) {\n    container.appendChild(this.stats.dom);\n    this.hud = new HUD(this);\n    this.addRocks(3);\n    this.addPlayer();\n    this.start();\n\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = (e: KeyboardEvent) => {\n    if (e.code === 'Enter') {\n      const player = this.objects.find(o => o instanceof Player);\n      if (player && player.health <= 0) {\n        this.reset();\n      }\n    }\n  };\n\n  start() {\n    this.lastUpdateTime = performance.now();\n    this.animationFrameHandle = requestAnimationFrame(this.update);\n  }\n\n  update = (time: number) => {\n    this.stats.begin();\n    const frameTime = 1; // (time - this.lastUpdateTime) / Game.FRAME_TIME;\n    this.lastUpdateTime = time;\n    this.objects.forEach(obj => {\n      obj.update(frameTime);\n      obj.render();\n    });\n    if (this.hud) {\n      const player = this.objects.find(o => o instanceof Player) as Player | undefined;\n      this.hud.resize();\n      this.hud.update({ playerHealth: player ? player.health : 0, playerMaxHealth: player ? player.maxHealth : 0 });\n    }\n    this.stats.end();\n    this.animationFrameHandle = requestAnimationFrame(this.update);\n  };\n\n  reset() {\n    // remove all existing objects and recreate initial state\n    // detach graphics first to avoid modifying while iterating\n    const copy = [...this.objects];\n    copy.forEach(obj => this.removeObject(obj));\n    this.objects = [];\n    // re-add initial scene\n    this.addRocks(3);\n    this.addPlayer();\n  }\n\n  stop() {\n    this.animationFrameHandle && cancelAnimationFrame(this.animationFrameHandle);\n  }\n\n  addRocks(count: number, source?: {\n    x: number;\n    y: number;\n    iteration: number;\n  }) {\n    while (count--)\n      this.addObject(this.createRock(source));\n  }\n\n  createRock(source?: {\n    x: number;\n    y: number;\n    iteration: number;\n  }) {\n    const rock = new Rock(this, source ? source.iteration : undefined);\n    rock.x = source ? source.x : Math.random() * this.viewport.width;\n    rock.y = source ? source.y : Math.random() * this.viewport.height;\n    return rock;\n  }\n\n  addPlayer() {\n    this.addObject(this.createPlayer());\n  }\n\n  createPlayer() {\n    const player = new Player(this);\n    player.x = this.viewport.width / 2;\n    player.y = this.viewport.height / 2;\n    return player;\n  }\n\n  addBullet(args: {\n    x: number;\n    y: number;\n    degrees: number;\n    vector: {\n      x: number;\n      y: number;\n    };\n  }) {\n    this.addObject(this.createBullet(args));\n  }\n\n  createBullet({ x, y, degrees, vector }: {\n    x: number;\n    y: number;\n    degrees: number;\n    vector: {\n      x: number;\n      y: number;\n    };\n  }) {\n    const bullet = new Bullet(this, degrees, vector);\n    bullet.x = x;\n    bullet.y = y;\n    return bullet;\n  }\n\n  addParticles(count: number, source: {\n    x: number;\n    y: number;\n    angleDegrees?: number;\n    spreadDegrees?: number;\n  }, opts?: ParticleOptions) {\n    const { x, y, angleDegrees = 0, spreadDegrees = 360 } = source;\n    while (count--) {\n      const degrees = angleDegrees - spreadDegrees / 2 + spreadDegrees * Math.random();\n      this.addObject(this.createParticle({ x, y, degrees }, opts));\n    }\n  }\n\n  createParticle({ x, y, degrees }: {\n    x: number;\n    y: number;\n    degrees: number;\n  }, opts?: ParticleOptions) {\n    const particle = new Particle(this, degrees, opts);\n    particle.x = x;\n    particle.y = y;\n    return particle;\n  }\n\n  addObject(obj: GameObject) {\n    this.objects.push(obj);\n    obj.draw();\n    obj.render();\n    this.container.appendChild(obj.graphics);\n  }\n\n  removeObject(obj: GameObject) {\n    this.objects.splice(this.objects.indexOf(obj), 1);\n    this.container.removeChild(obj.graphics);\n  }\n\n  getObjectsIntersectingCircle<T extends GameObject = GameObject>({ radius, ...point }: {\n    x: number;\n    y: number;\n    radius: number;\n  }, type?: {\n    new(...args: any[]): T;\n  }): T[] {\n    const objects = type\n      ? this.objects.filter(obj => obj instanceof type) as T[]\n      : this.objects as T[];\n    return objects.filter(obj => {\n      return distanceBetween(point, obj) <= obj.radius + radius;\n    });\n  }\n\n  get viewport() {\n    return this.container.getBoundingClientRect();\n  }\n}\n","import { Game } from \"./Game\";\nimport { createContainerElement } from \"./dom-utils\";\n\nsetTimeout(create);\n\nfunction create() {\n  const container = createContainerElement();\n  container.style.overflow = \"hidden\";\n  document.body.appendChild(container);\n\n  const game = new Game(container);\n}"]}