{"version":3,"sources":["../node_modules/stats.js/build/stats.min.js","math-utils.ts","dom-utils.ts","GameObject.ts","Theme.ts","Particle.ts","Rock.ts","KeyboardController.ts","Player.ts","UFOBullet.ts","Powerup.ts","UFO.ts","Bullet.ts","HUD.ts","Game.ts","asteroids.ts"],"names":[],"mappings":"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","file":"asteroids.8a6db3ed.js","sourceRoot":"../src","sourcesContent":["// stats.js - http://github.com/mrdoob/stats.js\n(function(f,e){\"object\"===typeof exports&&\"undefined\"!==typeof module?module.exports=e():\"function\"===typeof define&&define.amd?define(e):f.Stats=e()})(this,function(){var f=function(){function e(a){c.appendChild(a.dom);return a}function u(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?\"block\":\"none\";l=a}var l=0,c=document.createElement(\"div\");c.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";c.addEventListener(\"click\",function(a){a.preventDefault();\nu(++l%c.children.length)},!1);var k=(performance||Date).now(),g=k,a=0,r=e(new f.Panel(\"FPS\",\"#0ff\",\"#002\")),h=e(new f.Panel(\"MS\",\"#0f0\",\"#020\"));if(self.performance&&self.performance.memory)var t=e(new f.Panel(\"MB\",\"#f08\",\"#201\"));u(0);return{REVISION:16,dom:c,addPanel:e,showPanel:u,begin:function(){k=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();h.update(c-k,200);if(c>g+1E3&&(r.update(1E3*a/(c-g),100),g=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/\n1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){k=this.end()},domElement:c,setMode:u}};f.Panel=function(e,f,l){var c=Infinity,k=0,g=Math.round,a=g(window.devicePixelRatio||1),r=80*a,h=48*a,t=3*a,v=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement(\"canvas\");q.width=r;q.height=h;q.style.cssText=\"width:80px;height:48px\";var b=q.getContext(\"2d\");b.font=\"bold \"+9*a+\"px Helvetica,Arial,sans-serif\";b.textBaseline=\"top\";b.fillStyle=l;b.fillRect(0,0,r,h);b.fillStyle=f;b.fillText(e,t,v);\nb.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(h,w){c=Math.min(c,h);k=Math.max(k,h);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=f;b.fillText(g(h)+\" \"+e+\" (\"+g(c)+\"-\"+g(k)+\")\",t,v);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,g((1-h/w)*p))}}};return f});\n","\nexport const degreesToRadians = (degrees: number) => degrees * (Math.PI / 180);\nexport const radiansToDegrees = (radians: number) => radians * (180 / Math.PI);\n\nexport function vector(args: { length: number; degrees: number }): { x: number; y: number; }\nexport function vector(args: { length: number; radians: number }): { x: number; y: number; }\nexport function vector({ length, ...radiansOrDegrees }: ({\n  radians: number;\n} | {\n  degrees: number;\n}) & {\n  length: number;\n}): {\n  x: number;\n  y: number;\n} {\n  const radians = \"radians\" in radiansOrDegrees\n    ? radiansOrDegrees.radians\n    : degreesToRadians(radiansOrDegrees.degrees);\n  return {\n    x: Math.cos(radians) * length,\n    y: Math.sin(radians) * length\n  };\n}\n\nexport function vectorLength({ x, y }: { x: number; y: number; }): number {\n  return Math.sqrt((x * x) + (y * y));\n}\n\nexport function distanceBetween(from: { x: number; y: number; }, to: { x: number; y: number; }): number {\n  const deltaX = from.x - to.x;\n  const deltaY = from.y - to.y;\n  return Math.sqrt((deltaX * deltaX) + (deltaY * deltaY));\n}\n\nexport function angleBetween(from: { x: number; y: number }, to: { x: number; y: number }): number {\n  const dx = to.x - from.x;\n  const dy = to.y - from.y;\n  return Math.atan2(dy, dx) * 180 / Math.PI;\n}","export function createContainerElement() {\n  const elem = document.createElement(\"div\");\n  elem.style.cssText = `position: absolute; top: 0; left: 0; right: 0; bottom: 0;`;\n  return elem;\n}\n\nexport function createRadialCanvasElement(radius: number) {\n  const elem = document.createElement(\"canvas\");\n  elem.style.cssText = `position: absolute; top: -${radius}px; left: -${radius}px`;\n  elem.width = radius * 2;\n  elem.height = radius * 2;\n  return elem;\n}\n","import { Game } from \"./Game\";\nimport { createRadialCanvasElement } from \"./dom-utils\";\nimport { createContainerElement } from \"./dom-utils\";\n\nexport abstract class GameObject {\n  x: number = 0;\n  y: number = 0;\n  radius: number = 0;\n  rotation: number = 0;\n  friction: number = 0;\n  vector: {\n    x: number;\n    y: number;\n  } = { x: 0, y: 0 };\n  graphics = createContainerElement();\n  blinking = false;\n  blinkPhase = 1000;\n\n  constructor(public game: Game) { }\n\n  abstract draw(): void;\n\n  createCanvas() {\n    const canvas = createRadialCanvasElement(this.radius);\n    this.graphics.appendChild(canvas);\n    const ctx = canvas.getContext(\"2d\");\n    if (!ctx)\n      throw new Error(`Context not ready`);\n    return { canvas, ctx };\n  }\n\n  update(frameTime: number): void {\n    if (this.friction) {\n      this.vector.x *= this.friction;\n      this.vector.y *= this.friction;\n    }\n    if (this.vector.x !== 0 || this.vector.x !== 0) {\n      this.x += this.vector.x * frameTime;\n      this.y += this.vector.y * frameTime;\n      this.loop();\n    }\n  }\n\n  render() {\n    this.graphics.style.left = `${this.x}px`;\n    this.graphics.style.top = `${this.y}px`;\n    this.graphics.style.transform = `rotate(${this.rotation}deg)`;\n    this.graphics.style.transformOrigin = `top left`;\n\n    if (this.blinking) {\n      const now = performance.now();\n      // use blinkingPhase (ms) for the full fade-in/out period\n      const phase = (Math.sin((now / this.blinkPhase) * Math.PI * 2) + 1) / 2;\n      this.graphics.style.opacity = String(phase);\n    } else {\n      this.graphics.style.opacity = '1';\n    }\n  }\n\n  loop() {\n    const viewport = this.game.viewport;\n    if (this.x > viewport.width + this.radius)\n      this.x -= viewport.width + this.radius * 2;\n    else if (this.x < -this.radius)\n      this.x += viewport.width + this.radius * 2;\n    if (this.y > viewport.height + this.radius)\n      this.y -= viewport.height + this.radius * 2;\n    else if (this.y < -this.radius)\n      this.y += viewport.height + this.radius * 2;\n  }\n}\n","type ThemePreset = { name: string; foreground: string; background: string };\n\nexport const THEMES: ThemePreset[] = [\n  { name: 'Neon Sunset', foreground: '#FF6AD5', background: '#0F0522' },\n  { name: 'Cosmic Purple', foreground: '#C792EA', background: '#0B0023' },\n  { name: 'Electric Blue', foreground: '#7EFCFF', background: '#001021' },\n  { name: 'Solar Flare', foreground: '#FFD166', background: '#2B0A00' },\n  { name: 'Mint Void', foreground: '#A6FFCB', background: '#002B1F' },\n  { name: 'Starlight', foreground: '#FFF8D6', background: '#001119' },\n  { name: 'Violet Nebula', foreground: '#FFC7FF', background: '#14001F' },\n  { name: 'Galactic Teal', foreground: '#8FFFCB', background: '#002934' },\n  { name: 'Arctic Glow', foreground: '#002D3A', background: '#F0F8FF' },\n  { name: 'Daybreak', foreground: '#3B2E2E', background: '#FFF7EC' },\n  { name: 'Lavender Mist', foreground: '#2B1B2F', background: '#F6F0FF' },\n  { name: 'Paper Space', foreground: '#0B2545', background: '#EAF6FF' },\n];\n\nexport class Theme {\n  static foreground = '#FFFFFF';\n  static background = '#000000';\n\n  static setTheme(preset: ThemePreset) {\n    Theme.foreground = preset.foreground;\n    Theme.background = preset.background;\n    if (typeof document !== 'undefined' && document.documentElement) {\n      document.documentElement.style.setProperty('--theme-foreground', Theme.foreground);\n      document.documentElement.style.setProperty('--theme-background', Theme.background);\n    }\n  }\n}\n\nexport function getThemeByName(name: string) {\n  return THEMES.find(t => t.name.toLowerCase() === name.toLowerCase());\n}\n\nexport function randomTheme() {\n  return THEMES[Math.floor(Math.random() * THEMES.length)];\n}\n","import { Game } from \"./Game\";\nimport { GameObject } from \"./GameObject\";\nimport { vector, vectorLength } from \"./math-utils\";\nimport { Theme } from \"./Theme\";\n\nexport interface ParticleOptions {\n  color?: string;\n  minSpeed?: number;\n  maxSpeed?: number;\n  maxScale?: number;\n  friction?: number;\n  radius?: number;\n}\n\nexport class Particle extends GameObject {\n  canvas!: HTMLCanvasElement;\n  color = Theme.foreground;\n  minSpeed = 10;\n  maxSpeed = 50;\n  maxScale = 15;\n  friction = 0.88;\n  radius = 2;\n\n  constructor(game: Game, degrees: number, opts: ParticleOptions = {}) {\n    super(game);\n    this.rotation = degrees;\n\n    // apply options with defaults\n    Object.assign(this, opts);\n\n    const speed = this.minSpeed + (this.maxSpeed - this.minSpeed) * Math.random();\n    this.vector = vector({ length: speed, degrees });\n  }\n\n  draw() {\n    const { canvas, ctx } = this.createCanvas();\n    this.canvas = canvas;\n    ctx.beginPath();\n    ctx.moveTo(this.radius * 2, 0);\n    ctx.lineTo(this.radius * 2, this.radius * 2);\n    ctx.lineTo(0, this.radius);\n    ctx.closePath();\n    ctx.fillStyle = this.color;\n    ctx.fill();\n  }\n\n  update(frameTime: number) {\n    super.update(frameTime);\n    const speed = vectorLength(this.vector);\n    if (speed < 1) {\n      this.game.removeObject(this);\n    }\n  }\n  \n  render() {\n    super.render();\n    const speed = vectorLength(this.vector);\n    const scale = this.maxScale * (speed / this.maxSpeed);\n    this.canvas.style.transform = `scaleX(${scale})`;\n  }\n}\n","import { Game } from \"./Game\";\nimport { GameObject } from \"./GameObject\";\nimport { vector } from \"./math-utils\";\nimport { Theme } from \"./Theme\";\n\nexport class Rock extends GameObject {\n  spin: number;\n  health: number;\n  static maxIteration = 3;\n  static rocksSpawnedOnDeath = 3;\n\n  constructor(game: Game, public iteration: number = 1) {\n    super(game);\n    this.iteration = iteration;\n    this.health = 12 - iteration * 2;\n    this.spin = Math.random() * iteration;\n    this.radius = 75 / iteration;\n    this.vector = vector({ length: iteration, degrees: Math.random() * 360 });\n  }\n\n  draw() {\n    const { ctx } = this.createCanvas();\n    ctx.beginPath();\n    ctx.translate(this.radius, this.radius);\n    const edges = 12, noise = .44;\n    for (let i = 0; i < edges; i++) {\n      const degrees = ((360 / edges) * i) + ((360 / edges) * noise * Math.random());\n      const length = this.radius - (this.radius * noise * Math.random());\n      const { x, y } = vector({ length, degrees });\n      ctx.lineTo(x, y);\n    }\n    ctx.closePath();\n    ctx.strokeStyle = Theme.foreground;\n    ctx.stroke();\n  }\n\n  update(frameTime: number) {\n    super.update(frameTime);\n    this.rotation += this.spin * frameTime;\n  }\n  \n  hit() {\n    if (--this.health <= 0) {\n      this.game.removeObject(this);\n      this.game.addParticles(25, { x: this.x, y: this.y });\n      if (this.iteration < Rock.maxIteration) {\n        const iteration = this.iteration + 1;\n        this.game.addRocks(Rock.rocksSpawnedOnDeath, { x: this.x, y: this.y, iteration });\n      }\n    }\n  }\n\n  kill() {\n    this.health = 1;\n    this.hit();\n  }\n}\n","export class KeyboardController {\n  keys: {\n    [code: string]: boolean;\n  } = {};\n\n  constructor() {\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n    window.addEventListener(\"keyup\", this.handleKeyUp);\n  }\n\n  handleKeyDown = (e: KeyboardEvent) => {\n    // console.log(\"keyDown\", e.code);\n    this.keys[e.code] = true;\n  };\n\n  handleKeyUp = (e: KeyboardEvent) => {\n    this.keys[e.code] = false;\n  };\n  \n  isDown(key: string): boolean {\n    return !!this.keys[key];\n  }\n}\n","import { Game } from \"./Game\";\nimport { GameObject } from \"./GameObject\";\nimport { vector } from \"./math-utils\";\nimport { KeyboardController } from \"./KeyboardController\";\nimport { Particle } from \"./Particle\";\nimport { Rock } from \"./Rock\";\nimport { Theme } from \"./Theme\";\n\nexport class Player extends GameObject {\n  rotationSpeed = 3;\n  thrustSpeed = .15;\n  refireDelay = 10;\n  keyboard = new KeyboardController();\n  refire = 0;\n  health = 4;\n  maxHealth = 4;\n  dead = false;\n  invulnerable = false;\n  invulnerableUntil = 0;\n  color = Theme.foreground;\n\n  constructor(game: Game) {\n    super(game);\n    this.radius = 12;\n    this.friction = .99;\n  }\n\n  hit(damage = 1) {\n    if (this.invulnerable || this.dead) return;\n    const now = performance.now();\n    this.health -= damage;\n\n    // spawn red sparks\n    this.game.addParticles(16, { x: this.x, y: this.y, angleDegrees: 0, spreadDegrees: 360 }, { color: 'red', minSpeed: 2, maxSpeed: 12, maxScale: 12, friction: .92 });\n\n    if (this.health <= 0) {\n      // big dramatic burst and mark dead\n      this.game.addParticles(64, { x: this.x, y: this.y, angleDegrees: 0, spreadDegrees: 360 }, { color: 'red', minSpeed: 2, maxSpeed: 24, maxScale: 24, friction: .92 });\n      this.game.addParticles(64, { x: this.x, y: this.y, angleDegrees: 0, spreadDegrees: 360 }, { color: 'red', minSpeed: 1, maxSpeed: 24, maxScale: 24, friction: .98 });\n      this.dead = true;\n      this.graphics.style.display = 'none';\n      return;\n    }\n\n    // set invulnerability (timestamp) and enable visible blinking\n    this.invulnerable = true;\n    this.invulnerableUntil = now + 1000;\n    this.color = 'red';\n    this.draw();\n    this.blinkPhase = 100;\n    this.blinking = true;\n  }\n\n  draw() {\n    // if dead, don't draw the ship anymore\n    if (this.dead) {\n      // clear any existing canvas so the ship disappears\n      const existing = this.graphics.querySelector('canvas') as HTMLCanvasElement | null;\n      if (existing) {\n        const ctx = existing.getContext('2d')!;\n        ctx.clearRect(0, 0, existing.width, existing.height);\n      }\n      return;\n    }\n\n    // reuse existing canvas if present to avoid appending multiple canvases\n    let canvas = this.graphics.querySelector('canvas') as HTMLCanvasElement | null;\n    let ctx: CanvasRenderingContext2D;\n    if (canvas) {\n      ctx = canvas.getContext('2d')!;\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n    } else {\n      const res = this.createCanvas();\n      canvas = res.canvas;\n      ctx = res.ctx;\n    }\n\n    ctx.beginPath();\n    ctx.moveTo(this.radius * 2, this.radius);\n    ctx.lineTo(0, this.radius * 2);\n    ctx.lineTo(this.radius / 2, this.radius);\n    ctx.lineTo(0, 0);\n    ctx.closePath();\n    ctx.fillStyle = this.color;\n    ctx.fill();\n  }\n  \n  update(frameTime: number) {\n    // if dead, ignore input and movement\n    if (this.dead) return;\n\n    super.update(frameTime);\n    if (this.keyboard.isDown(\"ArrowLeft\")) {\n      this.rotation -= this.rotationSpeed * frameTime;\n    }\n    if (this.keyboard.isDown(\"ArrowRight\")) {\n      this.rotation += this.rotationSpeed * frameTime;\n    }\n    if (this.keyboard.isDown(\"ArrowUp\")) {\n      const { x, y } = vector({ length: this.thrustSpeed * frameTime, degrees: this.rotation });\n      this.vector.x += x * frameTime;\n      this.vector.y += y * frameTime;\n      const offset = vector({ length: this.radius + this.radius * Math.random(), degrees: this.rotation - 180 });\n      this.game.addParticles(1, { x: this.x + offset.x, y: this.y + offset.y, angleDegrees: this.rotation - 180, spreadDegrees: 35 });\n    }\n    this.refire -= 1 * frameTime;\n    if (this.keyboard.isDown(\"Space\") && this.refire <= 0) {\n      this.refire = this.refireDelay;\n      const offset = vector({ length: this.radius, degrees: this.rotation });\n      this.game.addBullet({ x: this.x + offset.x, y: this.y + offset.y, degrees: this.rotation, vector: this.vector });\n    }\n\n    // handle invulnerability expiry using a timestamp\n    if (this.invulnerable) {\n      const now = performance.now();\n      if (now >= this.invulnerableUntil) {\n          this.invulnerable = false;\n          this.blinking = false;\n          this.color = Theme.foreground;\n          this.draw();\n        }\n    }\n\n    // collision detection with rocks\n    if (!this.invulnerable) {\n      const hits = this.game.getObjectsIntersectingCircle({ x: this.x, y: this.y, radius: this.radius }, Rock);\n      if (hits.length > 0) {\n          // break the rock we collided with\n          hits.forEach(rock => rock.kill());\n\n          // player takes damage\n          this.hit(1);\n      }\n    }\n  }\n}\n","import { Game } from \"./Game\";\nimport { GameObject } from \"./GameObject\";\nimport { Player } from \"./Player\";\nimport { Rock } from \"./Rock\";\nimport { vector } from \"./math-utils\";\n\nexport class UFOBullet extends GameObject {\n  speed = 6;\n  life = 180;\n  // simple counter to throttle trail emission\n  private trailTick = 0;\n\n  constructor(game: Game, degrees: number, initVector: { x: number; y: number }) {\n    super(game);\n    this.radius = 4;\n    this.rotation = degrees;\n    this.vector = vector({ length: this.speed, degrees });\n    this.vector.x += initVector.x;\n    this.vector.y += initVector.y;\n  }\n\n  draw() {\n    const { canvas, ctx } = this.createCanvas();\n    ctx.beginPath();\n    ctx.moveTo(this.radius * 2, this.radius);\n    ctx.lineTo(this.radius * 1.2, this.radius * 2);\n    ctx.lineTo(0, this.radius);\n    ctx.lineTo(this.radius * 1.2, 0);\n    ctx.closePath();\n    ctx.fillStyle = '#4caf50';\n    ctx.fill();\n    canvas.style.transform = `scaleX(2)`;\n  }\n\n  update(frameTime: number) {\n    super.update(frameTime);\n    this.life -= frameTime;\n    if (this.life <= 0) {\n      this.game.removeObject(this);\n      return;\n    }\n\n    // emit a small green trail periodically\n    this.trailTick += frameTime;\n    if (this.trailTick >= 2) { // emit roughly every couple frames\n      this.trailTick = 0;\n      this.game.addParticles(1, { x: this.x, y: this.y }, { color: '#66bb6a', minSpeed: .5, maxSpeed: 3, maxScale: 12, friction: 0.9, radius: 1 });\n    }\n\n    // hit player\n    const players = this.game.getObjectsIntersectingCircle({ x: this.x, y: this.y, radius: this.radius }, Player);\n    if (players.length) {\n      const p = players[0] as Player;\n      p.hit(1);\n      this.game.removeObject(this);\n      return;\n    }\n\n    // hit rocks\n    const rocks = this.game.getObjectsIntersectingCircle({ x: this.x, y: this.y, radius: this.radius }, Rock);\n    if (rocks.length) {\n      rocks.forEach(r => r.kill());\n      this.game.addParticles(8, { x: this.x, y: this.y });\n      this.game.removeObject(this);\n      return;\n    }\n  }\n}\n","import { Game } from \"./Game\";\nimport { GameObject } from \"./GameObject\";\nimport { Player } from \"./Player\";\n\nexport class Powerup extends GameObject {\n  lifetime = 3600;\n  blinkThreshold = 900;\n  hitRadius = 30;\n\n  constructor(game: Game) {\n    super(game);\n    this.radius = 10;\n    // give a small random drift so the powerup slowly floats\n    const angle = Math.random() * 360;\n    const speed = 0.15 + Math.random() * 0.2;\n    this.vector = { x: Math.cos(angle * Math.PI / 180) * speed, y: Math.sin(angle * Math.PI / 180) * speed };\n    this.friction = 0.995;\n  }\n\n  draw() {\n    const { canvas, ctx } = this.createCanvas();\n    ctx.save();\n\n    // draw a filled circle\n    ctx.beginPath();\n    ctx.arc(this.radius, this.radius, this.radius, 0, Math.PI * 2);\n    ctx.fillStyle = '#2e7d32';\n    ctx.fill();\n    // draw white plus\n    ctx.fillStyle = 'white';\n    ctx.font = '16px sans-serif';\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    ctx.fillText('+', this.radius, this.radius + 1);\n    ctx.restore();\n  }\n\n  update(frameTime: number) {\n    super.update(frameTime);\n    this.lifetime -= frameTime;\n    // enable blinking when near expiry\n    if (this.lifetime <= this.blinkThreshold) {\n      this.blinking = true;\n    } else {\n      this.blinking = false;\n    }\n\n    if (this.lifetime <= 0) {\n      this.game.removeObject(this);\n      return;\n    }\n\n    // collide with player (use a larger hit radius so pickup feels forgiving)\n    const players = this.game.getObjectsIntersectingCircle({ x: this.x, y: this.y, radius: this.hitRadius }, Player);\n    if (players.length) {\n      const p = players[0] as Player;\n      p.health = Math.min(p.maxHealth, p.health + 1);\n      // spawn a small green burst\n      this.game.addParticles(10, { x: this.x, y: this.y }, { color: '#4caf50', minSpeed: 2, maxSpeed: 12, maxScale: 10 });\n      this.game.removeObject(this);\n      return;\n    }\n  }\n}\n","import { Game } from \"./Game\";\nimport { GameObject } from \"./GameObject\";\nimport { vector, angleBetween } from \"./math-utils\";\nimport { Player } from \"./Player\";\nimport { UFOBullet } from \"./UFOBullet\";\nimport { Powerup } from \"./Powerup\";\nimport { Theme } from \"./Theme\";\n\nexport class UFO extends GameObject {\n  speed = 0.02;\n  health = 6;\n  fireCooldown = 0;\n  aimSpread = 6;\n\n  constructor(game: Game) {\n    super(game);\n    // make the UFO larger for more presence\n    this.radius = 34;\n    this.friction = .995;\n    this.fireCooldown = 60 + Math.random() * 120;\n  }\n\n  draw() {\n    const { canvas, ctx } = this.createCanvas();\n\n    // UFO body uses theme foreground\n    ctx.beginPath();\n    ctx.ellipse(this.radius, this.radius, this.radius, this.radius * 0.6, 0, 0, Math.PI * 2);\n    ctx.fillStyle = Theme.foreground;\n    ctx.fill();\n\n    // Dome window detail\n\n    const cx = this.radius;\n    const cy = this.radius;\n    ctx.beginPath();\n    const domeW = this.radius * 1.0;\n    const domeH = this.radius * 0.55;\n    ctx.ellipse(cx, cy - this.radius * 0.18, domeW * 0.55, domeH * 0.55, 0, 0, Math.PI * 2);\n    ctx.fillStyle = Theme.background;\n    ctx.fill();\n  }\n\n  update(frameTime: number) {\n    super.update(frameTime);\n    // pursue player\n    const player = this.game.objects.find(o => o instanceof Player) as Player | undefined;\n    if (player) {\n      const angle = angleBetween(this, player);\n      const v = vector({ length: this.speed, degrees: angle });\n      this.vector.x += v.x * frameTime;\n      this.vector.y += v.y * frameTime;\n\n      // occasionally fire\n      this.fireCooldown -= frameTime;\n      if (this.fireCooldown <= 0) {\n        this.fireCooldown = 120 + Math.random() * 240;\n        // apply random aim spread so UFO shots are not perfectly accurate\n        const spread = (Math.random() * 2 - 1) * this.aimSpread;\n        const aimed = angle + spread;\n        const bullet = new UFOBullet(this.game, aimed, this.vector);\n        bullet.x = this.x;\n        bullet.y = this.y;\n        this.game.addObject(bullet);\n      }\n    }\n  }\n\n  hit(damage = 1) {\n    this.health -= damage;\n    if (this.health <= 0) {\n      // spawn powerup\n      const p = new Powerup(this.game);\n      p.x = this.x;\n      p.y = this.y;\n      this.game.addObject(p);\n      // big explosion\n      this.game.addParticles(32, { x: this.x, y: this.y }, { color: 'red', minSpeed: 2, maxSpeed: 24, maxScale: 20 });\n      this.game.removeObject(this);\n    }\n  }\n}\n\n","import { Game } from \"./Game\";\nimport { GameObject } from \"./GameObject\";\nimport { Rock } from \"./Rock\";\nimport { UFO } from \"./UFO\";\nimport { vector } from \"./math-utils\";\nimport { Theme } from \"./Theme\";\n\nexport class Bullet extends GameObject {\n  speed = 10;\n  life = 120;\n  impactDepth = 3;\n\n  constructor(game: Game, degrees: number, initVector: {\n    x: number;\n    y: number;\n  }) {\n    super(game);\n    this.radius = 3;\n    this.rotation = degrees;\n    this.vector = vector({ length: this.speed, degrees });\n    this.vector.x += initVector.x;\n    this.vector.y += initVector.y;\n  }\n\n  draw() {\n    const { canvas, ctx } = this.createCanvas();\n    ctx.beginPath();\n    ctx.moveTo(this.radius * 2, this.radius);\n    ctx.lineTo(this.radius * 1.5, this.radius * 2);\n    ctx.lineTo(0, this.radius);\n    ctx.lineTo(this.radius * 1.5, 0);\n    ctx.closePath();\n    ctx.fillStyle = Theme.foreground;\n    ctx.fill();\n    canvas.style.transform = `scaleX(3)`;\n  }\n  \n  update(frameTime: number) {\n    super.update(frameTime);\n    this.life -= frameTime;\n    if (this.life <= 0) {\n      this.game.removeObject(this);\n    }\n    else {\n      const collidedRocks = this.game.getObjectsIntersectingCircle({\n        x: this.x,\n        y: this.y,\n        radius: -this.impactDepth\n      }, Rock);\n      if (collidedRocks.length) {\n        this.game.addParticles(5, { x: this.x, y: this.y });\n        this.game.removeObject(this);\n        collidedRocks.forEach(rock => rock.hit());\n      }\n      else {\n        const ufoHits = this.game.getObjectsIntersectingCircle({ x: this.x, y: this.y, radius: -this.impactDepth }, UFO);\n        if (ufoHits.length) {\n          // damage UFO\n          try { (ufoHits[0] as UFO).hit(1); } catch (e) {}\n          this.game.addParticles(8, { x: this.x, y: this.y }, { color: 'orange', minSpeed: 2, maxSpeed: 12 });\n          this.game.removeObject(this);\n        }\n      }\n    }\n  }\n}\n","import { Game } from './Game';\nimport { Theme } from './Theme';\n\nexport interface HUDState {\n  playerHealth: number;\n  playerMaxHealth: number;\n  level?: number;\n  bestLevel?: number;\n}\n\nexport class HUD {\n  el!: HTMLDivElement;\n  canvas!: HTMLCanvasElement;\n  ctx!: CanvasRenderingContext2D;\n\n  constructor(public game: Game) {\n    this.el = document.createElement('div');\n    this.el.style.cssText = 'position: absolute; left: 0; top: 0; pointer-events: none; width: 100%; height: 100%;';\n\n    this.canvas = document.createElement('canvas');\n    this.canvas.width = this.game.viewport.width;\n    this.canvas.height = this.game.viewport.height;\n    this.canvas.style.cssText = 'width: 100%; height: 100%; display: block; position: absolute; left: 0; top: 0;';\n\n    const ctx = this.canvas.getContext('2d');\n    if (!ctx) throw new Error('2D context not available');\n    this.ctx = ctx;\n\n    this.el.appendChild(this.canvas);\n\n    // attach to game's container\n    this.game.container.style.position = this.game.container.style.position || 'relative';\n    this.game.container.appendChild(this.el);\n  }\n\n  resize() {\n    this.canvas.width = this.game.viewport.width;\n    this.canvas.height = this.game.viewport.height;\n  }\n\n  update(state: HUDState) {\n    // clear the overlay\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n    const padding = 12;\n    this.drawHealth(state, padding);\n\n    // if the player is dead, show a centered message\n      if (state.playerHealth <= 0) {\n        const centerX = this.canvas.width / 2;\n        const centerY = this.canvas.height / 2;\n        this.ctx.save();\n        this.ctx.textAlign = 'center';\n\n        // Prepare texts\n        const title = ' You died';\n        const subtitle = 'Press Enter to play again';\n        this.ctx.font = '28px sans-serif';\n        const titleW = this.ctx.measureText(title).width;\n        this.ctx.font = '16px sans-serif';\n        const subW = this.ctx.measureText(subtitle).width;\n        const panelW = Math.max(titleW, subW) + 40;\n        const panelH = 64;\n\n        // draw red rounded panel\n        const px = centerX - panelW / 2;\n        const py = centerY - panelH / 2;\n        const r = 8;\n        this.ctx.fillStyle = '#b71c1c';\n        this.ctx.beginPath();\n        this.ctx.moveTo(px + r, py);\n        this.ctx.lineTo(px + panelW - r, py);\n        this.ctx.quadraticCurveTo(px + panelW, py, px + panelW, py + r);\n        this.ctx.lineTo(px + panelW, py + panelH - r);\n        this.ctx.quadraticCurveTo(px + panelW, py + panelH, px + panelW - r, py + panelH);\n        this.ctx.lineTo(px + r, py + panelH);\n        this.ctx.quadraticCurveTo(px, py + panelH, px, py + panelH - r);\n        this.ctx.lineTo(px, py + r);\n        this.ctx.quadraticCurveTo(px, py, px + r, py);\n        this.ctx.closePath();\n        this.ctx.fill();\n\n        // draw text\n        this.ctx.fillStyle = 'white';\n        this.ctx.font = '28px sans-serif';\n        this.ctx.fillText(title, centerX, centerY - 6);\n        this.ctx.font = '16px sans-serif';\n        this.ctx.fillText(subtitle, centerX, centerY + 18);\n        this.ctx.restore();\n    }\n  }\n\n  drawHealth(state: HUDState, padding = 12) {\n    const barWidth = 120;\n    const barHeight = 18;\n    const segments = state.playerMaxHealth || 1;\n    const segWidth = (barWidth - (segments - 1) * 6) / segments;\n    const healthX = this.canvas.width - padding - barWidth;\n    const y = padding;\n\n    // draw level and best level to the left of the health bar (horizontal layout)\n    const levelText = `Level ${state.level ?? 0}`;\n    const bestLabel = ` ${state.bestLevel ?? 0}`;\n    const startX = healthX - 160;\n    this.ctx.textAlign = 'left';\n    this.ctx.textBaseline = 'middle';\n    this.ctx.font = '14px sans-serif';\n\n    this.ctx.fillStyle = Theme.foreground;\n    this.ctx.fillText(levelText, startX, y + barHeight / 2);\n\n    // draw best (gold) to the right of level with a small gap\n    const levelW = this.ctx.measureText(levelText).width;\n    const gap = 12;\n    this.ctx.fillStyle = '#ffd700';\n    this.ctx.fillText(bestLabel, startX + levelW + gap, y + barHeight / 2);\n    // restore baseline to default for other text\n    this.ctx.textBaseline = 'alphabetic';\n\n    for (let i = 0; i < segments; i++) {\n      const sx = healthX + i * (segWidth + 6);\n      if (i < state.playerHealth) {\n        // choose color based on remaining health\n        const remaining = state.playerHealth;\n        let color = '#6ee36e'; // green\n        if (remaining === state.playerMaxHealth) color = '#6ee36e';\n        else if (remaining === state.playerMaxHealth - 1) color = '#ffd24d'; // yellow\n        else if (remaining === state.playerMaxHealth - 2) color = '#ff9a3c'; // orange\n        else color = '#ff5c5c'; // red\n        this.ctx.fillStyle = color;\n      } else {\n        this.ctx.fillStyle = '#333';\n      }\n      this.ctx.fillRect(sx, y, segWidth, barHeight);\n      // segment border\n      this.ctx.strokeStyle = Theme.background;\n      this.ctx.strokeRect(sx, y, segWidth, barHeight);\n    }\n\n  // remove explicit 'Health' label; keep alignment reset\n  this.ctx.textAlign = 'left';\n  }\n}\n","import Stats from \"stats.js\";\nimport { distanceBetween } from \"./math-utils\";\nimport { Particle, ParticleOptions } from \"./Particle\";\nimport { Bullet } from \"./Bullet\";\nimport { Player } from \"./Player\";\nimport { Rock } from \"./Rock\";\nimport { UFO } from \"./UFO\";\nimport { GameObject } from \"./GameObject\";\nimport { HUD } from \"./HUD\";\nimport { Theme, randomTheme } from \"./Theme\";\n\nexport class Game {\n  static FRAME_TIME = 1000 / 60;\n  objects: GameObject[] = [];\n  level = 0;\n  bestLevel = 0;\n  animationFrameHandle?: number;\n  lastUpdateTime?: number;\n  // next scheduled UFO spawn timestamp (ms)\n  nextUfoSpawnAt?: number;\n  stats = new Stats();\n  hud: HUD;\n  ufoSpawnInterval = 30_000;\n\n  constructor(public container: HTMLElement) {\n    container.appendChild(this.stats.dom);\n    this.hud = new HUD(this);\n    // load best level from localStorage\n    try {\n      const v = localStorage.getItem('asteroids:bestLevel');\n      if (v) this.bestLevel = parseInt(v, 10) || 0;\n    } catch (e) {}\n\n    this.level = 0;\n    Theme.setTheme(randomTheme());\n    this.addRocks(3);\n    this.addPlayer();\n  // schedule first UFO spawn 60s from now\n  this.nextUfoSpawnAt = performance.now() + 30_000;\n    this.start();\n\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = (e: KeyboardEvent) => {\n    if (e.code === 'Enter') {\n      const player = this.objects.find(o => o instanceof Player);\n      if (player && player.dead) {\n        this.reset();\n      }\n    }\n    if (e.code === 'KeyA') {\n      // spawn a UFO at random edge for testing\n      this.addObject(this.createUFO());\n    }\n  };\n\n  start() {\n    this.lastUpdateTime = performance.now();\n    this.animationFrameHandle = requestAnimationFrame(this.update);\n  }\n\n  update = (time: number) => {\n    this.stats.begin();\n    const frameTime = 1; // (time - this.lastUpdateTime) / Game.FRAME_TIME;\n    this.lastUpdateTime = time;\n    this.objects.forEach(obj => {\n      obj.update(frameTime);\n      obj.render();\n    });\n\n    // spawn a UFO every 60 seconds while the game is running\n    if (this.nextUfoSpawnAt && time >= this.nextUfoSpawnAt) {\n      this.addObject(this.createUFO());\n      // schedule next spawn\n      this.nextUfoSpawnAt = time + this.ufoSpawnInterval;\n    }\n    // if no rocks remain, advance level\n    const rocksLeft = this.objects.filter(o => o instanceof Rock).length;\n    if (rocksLeft === 0) {\n      this.level += 1;\n      Theme.setTheme(randomTheme());\n      this.objects.forEach(obj => obj.draw());\n      const spawn = 3 + this.level;\n      this.addRocks(spawn);\n      if (this.level > this.bestLevel) {\n        this.bestLevel = this.level;\n        try { localStorage.setItem('asteroids:bestLevel', String(this.bestLevel)); } catch (e) {}\n      }\n    }\n    if (this.hud) {\n      const player = this.objects.find(o => o instanceof Player) as Player | undefined;\n      this.hud.resize();\n      this.hud.update({ playerHealth: player ? player.health : 0, playerMaxHealth: player ? player.maxHealth : 0, level: this.level, bestLevel: this.bestLevel });\n    }\n    this.stats.end();\n    this.animationFrameHandle = requestAnimationFrame(this.update);\n  };\n\n  reset() {\n    // remove all existing objects and recreate initial state\n    // detach graphics first to avoid modifying while iterating\n    const copy = [...this.objects];\n    copy.forEach(obj => this.removeObject(obj));\n    this.objects = [];\n    // reset level and re-add initial scene\n    this.level = 0;\n    Theme.setTheme(randomTheme());\n    this.addRocks(3);\n    this.addPlayer();\n    // reset UFO spawn timer\n    this.nextUfoSpawnAt = performance.now() + this.ufoSpawnInterval;\n  }\n\n  stop() {\n    this.animationFrameHandle && cancelAnimationFrame(this.animationFrameHandle);\n  }\n\n  addRocks(count: number, source?: {\n    x: number;\n    y: number;\n    iteration: number;\n  }) {\n    while (count--)\n      this.addObject(this.createRock(source));\n  }\n\n  createRock(source?: {\n    x: number;\n    y: number;\n    iteration: number;\n  }) {\n    const rock = new Rock(this, source ? source.iteration : undefined);\n    rock.x = source ? source.x : Math.random() * this.viewport.width;\n    rock.y = source ? source.y : Math.random() * this.viewport.height;\n    return rock;\n  }\n\n  addPlayer() {\n    this.addObject(this.createPlayer());\n  }\n\n  createPlayer() {\n    const player = new Player(this);\n    player.x = this.viewport.width / 2;\n    player.y = this.viewport.height / 2;\n    return player;\n  }\n\n  createUFO() {\n    const ufo = new UFO(this);\n    // spawn at a random edge\n    const edge = Math.floor(Math.random() * 4);\n    const vw = this.viewport.width;\n    const vh = this.viewport.height;\n    if (edge === 0) { // top\n      ufo.x = Math.random() * vw;\n      ufo.y = -ufo.radius * 2;\n    } else if (edge === 1) { // right\n      ufo.x = vw + ufo.radius * 2;\n      ufo.y = Math.random() * vh;\n    } else if (edge === 2) { // bottom\n      ufo.x = Math.random() * vw;\n      ufo.y = vh + ufo.radius * 2;\n    } else { // left\n      ufo.x = -ufo.radius * 2;\n      ufo.y = Math.random() * vh;\n    }\n    return ufo;\n  }\n\n  addBullet(args: {\n    x: number;\n    y: number;\n    degrees: number;\n    vector: {\n      x: number;\n      y: number;\n    };\n  }) {\n    this.addObject(this.createBullet(args));\n  }\n\n  createBullet({ x, y, degrees, vector }: {\n    x: number;\n    y: number;\n    degrees: number;\n    vector: {\n      x: number;\n      y: number;\n    };\n  }) {\n    const bullet = new Bullet(this, degrees, vector);\n    bullet.x = x;\n    bullet.y = y;\n    return bullet;\n  }\n\n  addParticles(count: number, source: {\n    x: number;\n    y: number;\n    angleDegrees?: number;\n    spreadDegrees?: number;\n  }, opts?: ParticleOptions) {\n    const { x, y, angleDegrees = 0, spreadDegrees = 360 } = source;\n    while (count--) {\n      const degrees = angleDegrees - spreadDegrees / 2 + spreadDegrees * Math.random();\n      this.addObject(this.createParticle({ x, y, degrees }, opts));\n    }\n  }\n\n  createParticle({ x, y, degrees }: {\n    x: number;\n    y: number;\n    degrees: number;\n  }, opts?: ParticleOptions) {\n    const particle = new Particle(this, degrees, opts);\n    particle.x = x;\n    particle.y = y;\n    return particle;\n  }\n\n  addObject(obj: GameObject) {\n    this.objects.push(obj);\n    obj.draw();\n    obj.render();\n    this.container.appendChild(obj.graphics);\n  }\n\n  removeObject(obj: GameObject) {\n    this.objects.splice(this.objects.indexOf(obj), 1);\n    this.container.removeChild(obj.graphics);\n  }\n\n  getObjectsIntersectingCircle<T extends GameObject = GameObject>({ radius, ...point }: {\n    x: number;\n    y: number;\n    radius: number;\n  }, type?: {\n    new(...args: any[]): T;\n  }): T[] {\n    const objects = type\n      ? this.objects.filter(obj => obj instanceof type) as T[]\n      : this.objects as T[];\n    return objects.filter(obj => {\n      return distanceBetween(point, obj) <= obj.radius + radius;\n    });\n  }\n\n  get viewport() {\n    return this.container.getBoundingClientRect();\n  }\n}\n","import { Game } from \"./Game\";\nimport { createContainerElement } from \"./dom-utils\";\n\nsetTimeout(create);\n\nfunction create() {\n  const container = createContainerElement();\n  container.style.overflow = \"hidden\";\n  container.style.backgroundColor = 'var(--theme-background)';\n  document.body.appendChild(container);\n\n  const game = new Game(container);\n}"]}