parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"dnrf":[function(require,module,exports) {
var define;
var e;!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof e&&e.amd?e(n):t.Stats=n()}(this,function(){var e=function(){function t(e){return i.appendChild(e.dom),e}function n(e){for(var t=0;t<i.children.length;t++)i.children[t].style.display=t===e?"block":"none";l=e}var l=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",function(e){e.preventDefault(),n(++l%i.children.length)},!1);var a=(performance||Date).now(),o=a,r=0,f=t(new e.Panel("FPS","#0ff","#002")),c=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:i,addPanel:t,showPanel:n,begin:function(){a=(performance||Date).now()},end:function(){r++;var e=(performance||Date).now();if(c.update(e-a,200),e>o+1e3&&(f.update(1e3*r/(e-o),100),o=e,r=0,d)){var t=performance.memory;d.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:i,setMode:n}};return e.Panel=function(e,t,n){var l=1/0,i=0,a=Math.round,o=a(window.devicePixelRatio||1),r=80*o,f=48*o,c=3*o,d=2*o,p=3*o,u=15*o,s=74*o,m=30*o,h=document.createElement("canvas");h.width=r,h.height=f,h.style.cssText="width:80px;height:48px";var v=h.getContext("2d");return v.font="bold "+9*o+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=n,v.fillRect(0,0,r,f),v.fillStyle=t,v.fillText(e,c,d),v.fillRect(p,u,s,m),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(p,u,s,m),{dom:h,update:function(f,y){l=Math.min(l,f),i=Math.max(i,f),v.fillStyle=n,v.globalAlpha=1,v.fillRect(0,0,r,u),v.fillStyle=t,v.fillText(a(f)+" "+e+" ("+a(l)+"-"+a(i)+")",c,d),v.drawImage(h,p+o,u,s-o,m,p,u,s-o,m),v.fillRect(p+s-o,u,o,m),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(p+s-o,u,o,a((1-f/y)*m))}}},e});
},{}],"aS9Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vector=n,exports.vectorLength=o,exports.distanceBetween=a,exports.angleBetween=s,exports.radiansToDegrees=exports.degreesToRadians=void 0;var e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},t=function(e){return e*(Math.PI/180)};exports.degreesToRadians=t;var r=function(e){return e*(180/Math.PI)};function n(r){var n=r.length,o=e(r,["length"]),a="radians"in o?o.radians:t(o.degrees);return{x:Math.cos(a)*n,y:Math.sin(a)*n}}function o(e){var t=e.x,r=e.y;return Math.sqrt(t*t+r*r)}function a(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)}function s(e,t){var r=t.x-e.x,n=t.y-e.y;return 180*Math.atan2(n,r)/Math.PI}exports.radiansToDegrees=r;
},{}],"he1Q":[function(require,module,exports) {
"use strict";function e(){var e=document.createElement("div");return e.style.cssText="position: absolute; top: 0; left: 0; right: 0; bottom: 0;",e}function t(e){var t=document.createElement("canvas");return t.style.cssText="position: absolute; top: -".concat(e,"px; left: -").concat(e,"px"),t.width=2*e,t.height=2*e,t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createContainerElement=e,exports.createRadialCanvasElement=t;
},{}],"uSNF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GameObject=void 0;var t=require("./dom-utils"),i=function(){function i(i){this.game=i,this.x=0,this.y=0,this.radius=0,this.rotation=0,this.friction=0,this.vector={x:0,y:0},this.graphics=(0,t.createContainerElement)(),this.blinking=!1,this.blinkPhase=1e3}return i.prototype.createCanvas=function(){var i=(0,t.createRadialCanvasElement)(this.radius);this.graphics.appendChild(i);var s=i.getContext("2d");if(!s)throw new Error("Context not ready");return{canvas:i,ctx:s}},i.prototype.update=function(t){this.friction&&(this.vector.x*=this.friction,this.vector.y*=this.friction),0===this.vector.x&&0===this.vector.x||(this.x+=this.vector.x*t,this.y+=this.vector.y*t,this.loop())},i.prototype.render=function(){if(this.graphics.style.left="".concat(this.x,"px"),this.graphics.style.top="".concat(this.y,"px"),this.graphics.style.transform="rotate(".concat(this.rotation,"deg)"),this.graphics.style.transformOrigin="top left",this.blinking){var t=performance.now(),i=(Math.sin(t/this.blinkPhase*Math.PI*2)+1)/2;this.graphics.style.opacity=String(i)}else this.graphics.style.opacity="1"},i.prototype.loop=function(){var t=this.game.viewport;this.x>t.width+this.radius?this.x-=t.width+2*this.radius:this.x<-this.radius&&(this.x+=t.width+2*this.radius),this.y>t.height+this.radius?this.y-=t.height+2*this.radius:this.y<-this.radius&&(this.y+=t.height+2*this.radius)},i}();exports.GameObject=i;
},{"./dom-utils":"he1Q"}],"tT/D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getThemeByName=r,exports.randomTheme=n,exports.Theme=exports.THEMES=void 0;var e=[{name:"Neon Sunset",foreground:"#FF6AD5",background:"#0F0522"},{name:"Cosmic Purple",foreground:"#C792EA",background:"#0B0023"},{name:"Electric Blue",foreground:"#7EFCFF",background:"#001021"},{name:"Solar Flare",foreground:"#FFD166",background:"#2B0A00"},{name:"Mint Void",foreground:"#A6FFCB",background:"#002B1F"},{name:"Starlight",foreground:"#FFF8D6",background:"#001119"},{name:"Violet Nebula",foreground:"#FFC7FF",background:"#14001F"},{name:"Galactic Teal",foreground:"#8FFFCB",background:"#002934"},{name:"Arctic Glow",foreground:"#002D3A",background:"#F0F8FF"},{name:"Daybreak",foreground:"#3B2E2E",background:"#FFF7EC"},{name:"Lavender Mist",foreground:"#2B1B2F",background:"#F6F0FF"},{name:"Paper Space",foreground:"#0B2545",background:"#EAF6FF"}];exports.THEMES=e;var o=function(){function e(){}return e.setTheme=function(o){e.foreground=o.foreground,e.background=o.background,"undefined"!=typeof document&&document.documentElement&&(document.documentElement.style.setProperty("--theme-foreground",e.foreground),document.documentElement.style.setProperty("--theme-background",e.background))},e.foreground="#FFFFFF",e.background="#000000",e}();function r(o){return e.find(function(e){return e.name.toLowerCase()===o.toLowerCase()})}function n(){return e[Math.floor(Math.random()*e.length)]}exports.Theme=o;
},{}],"OH2U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Particle=void 0;var t=require("./GameObject"),e=require("./math-utils"),r=require("./Theme"),o=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=function(t){function n(o,n,i){void 0===i&&(i={});var a=t.call(this,o)||this;a.color=r.Theme.foreground,a.minSpeed=10,a.maxSpeed=50,a.maxScale=15,a.friction=.88,a.radius=2,a.rotation=n,Object.assign(a,i);var c=a.minSpeed+(a.maxSpeed-a.minSpeed)*Math.random();return a.vector=(0,e.vector)({length:c,degrees:n}),a}return o(n,t),n.prototype.draw=function(){var t=this.createCanvas(),e=t.canvas,r=t.ctx;this.canvas=e,r.beginPath(),r.moveTo(2*this.radius,0),r.lineTo(2*this.radius,2*this.radius),r.lineTo(0,this.radius),r.closePath(),r.fillStyle=this.color,r.fill()},n.prototype.update=function(r){t.prototype.update.call(this,r),(0,e.vectorLength)(this.vector)<1&&this.game.removeObject(this)},n.prototype.render=function(){t.prototype.render.call(this);var r=(0,e.vectorLength)(this.vector),o=this.maxScale*(r/this.maxSpeed);this.canvas.style.transform="scaleX(".concat(o,")")},n}(t.GameObject);exports.Particle=n;
},{"./GameObject":"uSNF","./math-utils":"aS9Q","./Theme":"tT/D"}],"TsCN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Rock=void 0;var t=require("./GameObject"),e=require("./math-utils"),r=require("./Theme"),o=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function i(r,o){void 0===o&&(o=1);var i=t.call(this,r)||this;return i.iteration=o,i.iteration=o,i.health=12-2*o,i.spin=Math.random()*o,i.radius=75/o,i.vector=(0,e.vector)({length:o,degrees:360*Math.random()}),i}return o(i,t),i.prototype.draw=function(){var t=this.createCanvas().ctx;t.beginPath(),t.translate(this.radius,this.radius);for(var o=0;o<12;o++){var i=30*o+13.2*Math.random(),n=this.radius-.44*this.radius*Math.random(),a=(0,e.vector)({length:n,degrees:i}),s=a.x,h=a.y;t.lineTo(s,h)}t.closePath(),t.strokeStyle=r.Theme.foreground,t.stroke()},i.prototype.update=function(e){t.prototype.update.call(this,e),this.rotation+=this.spin*e},i.prototype.hit=function(){if(--this.health<=0&&(this.game.removeObject(this),this.game.addParticles(25,{x:this.x,y:this.y}),this.iteration<i.maxIteration)){var t=this.iteration+1;this.game.addRocks(i.rocksSpawnedOnDeath,{x:this.x,y:this.y,iteration:t})}},i.prototype.kill=function(){this.health=1,this.hit()},i.maxIteration=3,i.rocksSpawnedOnDeath=3,i}(t.GameObject);exports.Rock=i;
},{"./GameObject":"uSNF","./math-utils":"aS9Q","./Theme":"tT/D"}],"u1PQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KeyboardController=void 0;var e=function(){function e(){var e=this;this.keys={},this.handleKeyDown=function(n){e.keys[n.code]=!0},this.handleKeyUp=function(n){e.keys[n.code]=!1},window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp)}return e.prototype.isDown=function(e){return!!this.keys[e]},e}();exports.KeyboardController=e;
},{}],"lbff":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Player=void 0;var e=require("./GameObject"),t=require("./math-utils"),i=require("./KeyboardController"),r=require("./Rock"),s=require("./Theme"),o=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),a=function(e){function a(t){var r=e.call(this,t)||this;return r.rotationSpeed=3,r.thrustSpeed=.15,r.refireDelay=10,r.keyboard=new i.KeyboardController,r.refire=0,r.health=4,r.maxHealth=4,r.dead=!1,r.invulnerable=!1,r.invulnerableUntil=0,r.color=s.Theme.foreground,r.radius=12,r.friction=.99,r}return o(a,e),a.prototype.hit=function(e){if(void 0===e&&(e=1),!this.invulnerable&&!this.dead){var t=performance.now();if(this.health-=e,this.game.addParticles(16,{x:this.x,y:this.y,angleDegrees:0,spreadDegrees:360},{color:"red",minSpeed:2,maxSpeed:12,maxScale:12,friction:.92}),this.health<=0)return this.game.addParticles(64,{x:this.x,y:this.y,angleDegrees:0,spreadDegrees:360},{color:"red",minSpeed:2,maxSpeed:24,maxScale:24,friction:.92}),this.game.addParticles(64,{x:this.x,y:this.y,angleDegrees:0,spreadDegrees:360},{color:"red",minSpeed:1,maxSpeed:24,maxScale:24,friction:.98}),this.dead=!0,void(this.graphics.style.display="none");this.invulnerable=!0,this.invulnerableUntil=t+1e3,this.color="red",this.draw(),this.blinkPhase=100,this.blinking=!0}},a.prototype.draw=function(){if(this.dead){var e=this.graphics.querySelector("canvas");e&&e.getContext("2d").clearRect(0,0,e.width,e.height)}else{var t,i=this.graphics.querySelector("canvas");if(i)(t=i.getContext("2d")).clearRect(0,0,i.width,i.height);else{var r=this.createCanvas();i=r.canvas,t=r.ctx}t.beginPath(),t.moveTo(2*this.radius,this.radius),t.lineTo(0,2*this.radius),t.lineTo(this.radius/2,this.radius),t.lineTo(0,0),t.closePath(),t.fillStyle=this.color,t.fill()}},a.prototype.update=function(i){if(!this.dead){if(e.prototype.update.call(this,i),this.keyboard.isDown("ArrowLeft")&&(this.rotation-=this.rotationSpeed*i),this.keyboard.isDown("ArrowRight")&&(this.rotation+=this.rotationSpeed*i),this.keyboard.isDown("ArrowUp")){var o=(0,t.vector)({length:this.thrustSpeed*i,degrees:this.rotation}),a=o.x,n=o.y;this.vector.x+=a*i,this.vector.y+=n*i;var h=(0,t.vector)({length:this.radius+this.radius*Math.random(),degrees:this.rotation-180});this.game.addParticles(1,{x:this.x+h.x,y:this.y+h.y,angleDegrees:this.rotation-180,spreadDegrees:35})}if(this.refire-=1*i,this.keyboard.isDown("Space")&&this.refire<=0){this.refire=this.refireDelay;h=(0,t.vector)({length:this.radius,degrees:this.rotation});this.game.addBullet({x:this.x+h.x,y:this.y+h.y,degrees:this.rotation,vector:this.vector})}if(this.invulnerable)performance.now()>=this.invulnerableUntil&&(this.invulnerable=!1,this.blinking=!1,this.color=s.Theme.foreground,this.draw());if(!this.invulnerable){var l=this.game.getObjectsIntersectingCircle({x:this.x,y:this.y,radius:this.radius},r.Rock);l.length>0&&(l.forEach(function(e){return e.kill()}),this.hit(1))}}},a}(e.GameObject);exports.Player=a;
},{"./GameObject":"uSNF","./math-utils":"aS9Q","./KeyboardController":"u1PQ","./Rock":"TsCN","./Theme":"tT/D"}],"zbmb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UFOBullet=void 0;var t=require("./GameObject"),e=require("./Player"),i=require("./Rock"),r=require("./math-utils"),s=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),o=function(t){function o(e,i,s){var o=t.call(this,e)||this;return o.speed=6,o.life=180,o.trailTick=0,o.radius=4,o.rotation=i,o.vector=(0,r.vector)({length:o.speed,degrees:i}),o.vector.x+=s.x,o.vector.y+=s.y,o}return s(o,t),o.prototype.draw=function(){var t=this.createCanvas(),e=t.canvas,i=t.ctx;i.beginPath(),i.moveTo(2*this.radius,this.radius),i.lineTo(1.2*this.radius,2*this.radius),i.lineTo(0,this.radius),i.lineTo(1.2*this.radius,0),i.closePath(),i.fillStyle="#4caf50",i.fill(),e.style.transform="scaleX(2)"},o.prototype.update=function(r){if(t.prototype.update.call(this,r),this.life-=r,!(this.life<=0)){this.trailTick+=r,this.trailTick>=2&&(this.trailTick=0,this.game.addParticles(1,{x:this.x,y:this.y},{color:"#66bb6a",minSpeed:.5,maxSpeed:3,maxScale:12,friction:.9,radius:1}));var s=this.game.getObjectsIntersectingCircle({x:this.x,y:this.y,radius:this.radius},e.Player);if(s.length)return s[0].hit(1),void this.game.removeObject(this);var o=this.game.getObjectsIntersectingCircle({x:this.x,y:this.y,radius:this.radius},i.Rock);return o.length?(o.forEach(function(t){return t.kill()}),this.game.addParticles(8,{x:this.x,y:this.y}),void this.game.removeObject(this)):void 0}this.game.removeObject(this)},o}(t.GameObject);exports.UFOBullet=o;
},{"./GameObject":"uSNF","./Player":"lbff","./Rock":"TsCN","./math-utils":"aS9Q"}],"A+Sy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Powerup=void 0;var t=require("./GameObject"),e=require("./Player"),i=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),r=function(t){function r(e){var i=t.call(this,e)||this;i.lifetime=3600,i.blinkThreshold=900,i.hitRadius=30,i.radius=10;var r=360*Math.random(),a=.15+.2*Math.random();return i.vector={x:Math.cos(r*Math.PI/180)*a,y:Math.sin(r*Math.PI/180)*a},i.friction=.995,i}return i(r,t),r.prototype.draw=function(){var t=this.createCanvas(),e=(t.canvas,t.ctx);e.save(),e.beginPath(),e.arc(this.radius,this.radius,this.radius,0,2*Math.PI),e.fillStyle="#2e7d32",e.fill(),e.fillStyle="white",e.font="16px sans-serif",e.textAlign="center",e.textBaseline="middle",e.fillText("+",this.radius,this.radius+1),e.restore()},r.prototype.update=function(i){if(t.prototype.update.call(this,i),this.lifetime-=i,this.lifetime<=this.blinkThreshold?this.blinking=!0:this.blinking=!1,this.lifetime<=0)this.game.removeObject(this);else{var r=this.game.getObjectsIntersectingCircle({x:this.x,y:this.y,radius:this.hitRadius},e.Player);if(r.length){var a=r[0];return a.health=Math.min(a.maxHealth,a.health+1),this.game.addParticles(10,{x:this.x,y:this.y},{color:"#4caf50",minSpeed:2,maxSpeed:12,maxScale:10}),void this.game.removeObject(this)}}},r}(t.GameObject);exports.Powerup=r;
},{"./GameObject":"uSNF","./Player":"lbff"}],"hTIk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UFO=void 0;var t=require("./GameObject"),e=require("./math-utils"),r=require("./Player"),i=require("./UFOBullet"),o=require("./Powerup"),a=require("./Theme"),s=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),n=function(t){function n(e){var r=t.call(this,e)||this;return r.speed=.02,r.health=6,r.fireCooldown=0,r.aimSpread=6,r.radius=34,r.friction=.995,r.fireCooldown=60+120*Math.random(),r}return s(n,t),n.prototype.draw=function(){var t=this.createCanvas(),e=(t.canvas,t.ctx);e.beginPath(),e.ellipse(this.radius,this.radius,this.radius,.6*this.radius,0,0,2*Math.PI),e.fillStyle=a.Theme.foreground,e.fill();var r=this.radius,i=this.radius;e.beginPath();var o=1*this.radius,s=.55*this.radius;e.ellipse(r,i-.18*this.radius,.55*o,.55*s,0,0,2*Math.PI),e.fillStyle=a.Theme.background,e.fill()},n.prototype.update=function(o){t.prototype.update.call(this,o);var a=this.game.objects.find(function(t){return t instanceof r.Player});if(a){var s=(0,e.angleBetween)(this,a),n=(0,e.vector)({length:this.speed,degrees:s});if(this.vector.x+=n.x*o,this.vector.y+=n.y*o,this.fireCooldown-=o,this.fireCooldown<=0){this.fireCooldown=120+240*Math.random();var h=s+(2*Math.random()-1)*this.aimSpread,u=new i.UFOBullet(this.game,h,this.vector);u.x=this.x,u.y=this.y,this.game.addObject(u)}}},n.prototype.hit=function(t){if(void 0===t&&(t=1),this.health-=t,this.health<=0){var e=new o.Powerup(this.game);e.x=this.x,e.y=this.y,this.game.addObject(e),this.game.addParticles(32,{x:this.x,y:this.y},{color:"red",minSpeed:2,maxSpeed:24,maxScale:20}),this.game.removeObject(this)}},n}(t.GameObject);exports.UFO=n;
},{"./GameObject":"uSNF","./math-utils":"aS9Q","./Player":"lbff","./UFOBullet":"zbmb","./Powerup":"A+Sy","./Theme":"tT/D"}],"QcFy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Bullet=void 0;var t=require("./GameObject"),e=require("./Rock"),i=require("./UFO"),r=require("./math-utils"),s=require("./Theme"),o=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),n=function(t){function n(e,i,s){var o=t.call(this,e)||this;return o.speed=10,o.life=120,o.impactDepth=3,o.radius=3,o.rotation=i,o.vector=(0,r.vector)({length:o.speed,degrees:i}),o.vector.x+=s.x,o.vector.y+=s.y,o}return o(n,t),n.prototype.draw=function(){var t=this.createCanvas(),e=t.canvas,i=t.ctx;i.beginPath(),i.moveTo(2*this.radius,this.radius),i.lineTo(1.5*this.radius,2*this.radius),i.lineTo(0,this.radius),i.lineTo(1.5*this.radius,0),i.closePath(),i.fillStyle=s.Theme.foreground,i.fill(),e.style.transform="scaleX(3)"},n.prototype.update=function(r){if(t.prototype.update.call(this,r),this.life-=r,this.life<=0)this.game.removeObject(this);else{var s=this.game.getObjectsIntersectingCircle({x:this.x,y:this.y,radius:-this.impactDepth},e.Rock);if(s.length)this.game.addParticles(5,{x:this.x,y:this.y}),this.game.removeObject(this),s.forEach(function(t){return t.hit()});else{var o=this.game.getObjectsIntersectingCircle({x:this.x,y:this.y,radius:-this.impactDepth},i.UFO);if(o.length){try{o[0].hit(1)}catch(n){}this.game.addParticles(8,{x:this.x,y:this.y},{color:"orange",minSpeed:2,maxSpeed:12}),this.game.removeObject(this)}}}},n}(t.GameObject);exports.Bullet=n;
},{"./GameObject":"uSNF","./Rock":"TsCN","./UFO":"hTIk","./math-utils":"aS9Q","./Theme":"tT/D"}],"ddZN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HUD=void 0;var t=require("./Theme"),e=function(){function e(t){this.game=t,this.el=document.createElement("div"),this.el.style.cssText="position: absolute; left: 0; top: 0; pointer-events: none; width: 100%; height: 100%;",this.canvas=document.createElement("canvas"),this.canvas.width=this.game.viewport.width,this.canvas.height=this.game.viewport.height,this.canvas.style.cssText="width: 100%; height: 100%; display: block; position: absolute; left: 0; top: 0;";var e=this.canvas.getContext("2d");if(!e)throw new Error("2D context not available");this.ctx=e,this.el.appendChild(this.canvas),this.game.container.style.position=this.game.container.style.position||"relative",this.game.container.appendChild(this.el)}return e.prototype.resize=function(){this.canvas.width=this.game.viewport.width,this.canvas.height=this.game.viewport.height},e.prototype.update=function(t){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);if(this.drawHealth(t,12),t.playerHealth<=0){var e=this.canvas.width/2,i=this.canvas.height/2;this.ctx.save(),this.ctx.textAlign="center";var s="Press Enter to play again";this.ctx.font="28px sans-serif";var a=this.ctx.measureText("💀 You died").width;this.ctx.font="16px sans-serif";var h=this.ctx.measureText(s).width,c=Math.max(a,h)+40,l=e-c/2,n=i-32;this.ctx.fillStyle="#b71c1c",this.ctx.beginPath(),this.ctx.moveTo(l+8,n),this.ctx.lineTo(l+c-8,n),this.ctx.quadraticCurveTo(l+c,n,l+c,n+8),this.ctx.lineTo(l+c,n+64-8),this.ctx.quadraticCurveTo(l+c,n+64,l+c-8,n+64),this.ctx.lineTo(l+8,n+64),this.ctx.quadraticCurveTo(l,n+64,l,n+64-8),this.ctx.lineTo(l,n+8),this.ctx.quadraticCurveTo(l,n,l+8,n),this.ctx.closePath(),this.ctx.fill(),this.ctx.fillStyle="white",this.ctx.font="28px sans-serif",this.ctx.fillText("💀 You died",e,i-6),this.ctx.font="16px sans-serif",this.ctx.fillText(s,e,i+18),this.ctx.restore()}},e.prototype.drawHealth=function(e,i){var s,a;void 0===i&&(i=12);var h=e.playerMaxHealth||1,c=(120-6*(h-1))/h,l=this.canvas.width-i-120,n=i,r="Level ".concat(null!==(s=e.level)&&void 0!==s?s:0),o="🏆 ".concat(null!==(a=e.bestLevel)&&void 0!==a?a:0),x=l-160;this.ctx.textAlign="left",this.ctx.textBaseline="middle",this.ctx.font="14px sans-serif",this.ctx.fillStyle=t.Theme.foreground,this.ctx.fillText(r,x,n+9);var v=this.ctx.measureText(r).width;this.ctx.fillStyle="#ffd700",this.ctx.fillText(o,x+v+12,n+9),this.ctx.textBaseline="alphabetic";for(var d=0;d<h;d++){var f=l+d*(c+6);if(d<e.playerHealth){var p=e.playerHealth,u="#6ee36e";u=p===e.playerMaxHealth?"#6ee36e":p===e.playerMaxHealth-1?"#ffd24d":p===e.playerMaxHealth-2?"#ff9a3c":"#ff5c5c",this.ctx.fillStyle=u}else this.ctx.fillStyle="#333";this.ctx.fillRect(f,n,c,18),this.ctx.strokeStyle=t.Theme.background,this.ctx.strokeRect(f,n,c,18)}this.ctx.textAlign="left"},e}();exports.HUD=e;
},{"./Theme":"tT/D"}],"3jKS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Game=void 0;var e=h(require("stats.js")),t=require("./math-utils"),r=require("./Particle"),n=require("./Bullet"),a=require("./Player"),i=require("./Rock"),o=require("./UFO"),s=require("./HUD"),c=require("./Theme");function h(e){return e&&e.__esModule?e:{default:e}}var d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},l=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},u=function(){function h(t){var r=this;this.container=t,this.objects=[],this.level=0,this.bestLevel=0,this.stats=new e.default,this.ufoSpawnInterval=3e4,this.handleKeyDown=function(e){if("Enter"===e.code){var t=r.objects.find(function(e){return e instanceof a.Player});t&&t.dead&&r.reset()}"KeyA"===e.code&&r.addObject(r.createUFO())},this.update=function(e){r.stats.begin();if(r.lastUpdateTime=e,r.objects.forEach(function(e){e.update(1),e.render()}),r.nextUfoSpawnAt&&e>=r.nextUfoSpawnAt&&(r.addObject(r.createUFO()),r.nextUfoSpawnAt=e+r.ufoSpawnInterval),0===r.objects.filter(function(e){return e instanceof i.Rock}).length){r.level+=1,c.Theme.setTheme((0,c.randomTheme)()),r.objects.forEach(function(e){return e.draw()});var t=3+r.level;if(r.addRocks(t),r.level>r.bestLevel){r.bestLevel=r.level;try{localStorage.setItem("asteroids:bestLevel",String(r.bestLevel))}catch(o){}}}if(r.hud){var n=r.objects.find(function(e){return e instanceof a.Player});r.hud.resize(),r.hud.update({playerHealth:n?n.health:0,playerMaxHealth:n?n.maxHealth:0,level:r.level,bestLevel:r.bestLevel})}r.stats.end(),r.animationFrameHandle=requestAnimationFrame(r.update)},t.appendChild(this.stats.dom),this.hud=new s.HUD(this);try{var n=localStorage.getItem("asteroids:bestLevel");n&&(this.bestLevel=parseInt(n,10)||0)}catch(o){}this.level=0,c.Theme.setTheme((0,c.randomTheme)()),this.addRocks(3),this.addPlayer(),this.nextUfoSpawnAt=performance.now()+3e4,this.start(),window.addEventListener("keydown",this.handleKeyDown)}return h.prototype.start=function(){this.lastUpdateTime=performance.now(),this.animationFrameHandle=requestAnimationFrame(this.update)},h.prototype.reset=function(){var e=this;l([],this.objects,!0).forEach(function(t){return e.removeObject(t)}),this.objects=[],this.level=0,c.Theme.setTheme((0,c.randomTheme)()),this.addRocks(3),this.addPlayer(),this.nextUfoSpawnAt=performance.now()+this.ufoSpawnInterval},h.prototype.stop=function(){this.animationFrameHandle&&cancelAnimationFrame(this.animationFrameHandle)},h.prototype.addRocks=function(e,t){for(;e--;)this.addObject(this.createRock(t))},h.prototype.createRock=function(e){var t=new i.Rock(this,e?e.iteration:void 0);return t.x=e?e.x:Math.random()*this.viewport.width,t.y=e?e.y:Math.random()*this.viewport.height,t},h.prototype.addPlayer=function(){this.addObject(this.createPlayer())},h.prototype.createPlayer=function(){var e=new a.Player(this);return e.x=this.viewport.width/2,e.y=this.viewport.height/2,e},h.prototype.createUFO=function(){var e=new o.UFO(this),t=Math.floor(4*Math.random()),r=this.viewport.width,n=this.viewport.height;return 0===t?(e.x=Math.random()*r,e.y=2*-e.radius):1===t?(e.x=r+2*e.radius,e.y=Math.random()*n):2===t?(e.x=Math.random()*r,e.y=n+2*e.radius):(e.x=2*-e.radius,e.y=Math.random()*n),e},h.prototype.addBullet=function(e){this.addObject(this.createBullet(e))},h.prototype.createBullet=function(e){var t=e.x,r=e.y,a=e.degrees,i=e.vector,o=new n.Bullet(this,a,i);return o.x=t,o.y=r,o},h.prototype.addParticles=function(e,t,r){for(var n=t.x,a=t.y,i=t.angleDegrees,o=void 0===i?0:i,s=t.spreadDegrees,c=void 0===s?360:s;e--;){var h=o-c/2+c*Math.random();this.addObject(this.createParticle({x:n,y:a,degrees:h},r))}},h.prototype.createParticle=function(e,t){var n=e.x,a=e.y,i=e.degrees,o=new r.Particle(this,i,t);return o.x=n,o.y=a,o},h.prototype.addObject=function(e){this.objects.push(e),e.draw(),e.render(),this.container.appendChild(e.graphics)},h.prototype.removeObject=function(e){this.objects.splice(this.objects.indexOf(e),1),this.container.removeChild(e.graphics)},h.prototype.getObjectsIntersectingCircle=function(e,r){var n=e.radius,a=d(e,["radius"]);return(r?this.objects.filter(function(e){return e instanceof r}):this.objects).filter(function(e){return(0,t.distanceBetween)(a,e)<=e.radius+n})},Object.defineProperty(h.prototype,"viewport",{get:function(){return this.container.getBoundingClientRect()},enumerable:!1,configurable:!0}),h.FRAME_TIME=1e3/60,h}();exports.Game=u;
},{"stats.js":"dnrf","./math-utils":"aS9Q","./Particle":"OH2U","./Bullet":"QcFy","./Player":"lbff","./Rock":"TsCN","./UFO":"hTIk","./HUD":"ddZN","./Theme":"tT/D"}],"aTsH":[function(require,module,exports) {
"use strict";var e=require("./Game"),r=require("./dom-utils");function t(){var t=(0,r.createContainerElement)();t.style.overflow="hidden",t.style.backgroundColor="var(--theme-background)",document.body.appendChild(t);new e.Game(t)}setTimeout(t);
},{"./Game":"3jKS","./dom-utils":"he1Q"}]},{},["aTsH"], null)
//# sourceMappingURL=asteroids.8a6db3ed.js.map